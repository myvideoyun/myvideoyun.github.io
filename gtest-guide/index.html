<!DOCTYPE html>
<html>
    <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1">
    <title>Gtest Guide - Myvideoyun&#39;s BLOG</title>

    <style type="text/css">
        img.wp-smiley,
        img.emoji {
            display: inline !important;
            border: none !important;
            box-shadow: none !important;
            height: 1em !important;
            width: 1em !important;
            margin: 0 .07em !important;
            vertical-align: -0.1em !important;
            background: none !important;
            padding: 0 !important;
        }
    </style>
    <link rel='stylesheet' href='/css/style.css' type='text/css' media='all' />
    <link rel='stylesheet' href='/css/custom.css' type='text/css' media='all' />
        
</head>
    <body class="two-column">
        <a href="#content">Skip to content</a>
<div class="wrapper">
    <header role="banner" class="banner widgets columns-1">
        <a href="/" rel="home">
            <h1 class="site">Myvideoyun&#39;s BLOG</h1>
            <p></p>
        </a>
        <nav role="navigation" aria-label="Primary Navigation">

            <ul class="menu">
                <li class="menu-item "><a class="menu__link" href="/about/">ABOUT</a></li>
            </ul>
            <select onChange="location.href=value;">
                <option value="/about/" class="menu-item menu-item-type-custom menu-item-object-custom" >ABOUT</option>
            </select>
        </nav>
    </header>

    <br>
    <div style="width: 100%; max-height: 100px; text-align: center;">
       
</div>

    <div class="breadcrumbs">
        
    </div>
        <div id="content" class="content">

<main role="main">
    <article role="article" class="post type-post format-standard hentry">
        <header class="post-header">
            <h1>Gtest Guide</h1>
            <div class="post-details">
                <a rel="bookmark">
                    <time datetime="2019-03-11T311:120:06">2019-03-11</time>
                </a>
				
<span style="float: right;">
    <div id="fb-root" style="height: 100%;"></div>
    
    <script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v3.2"></script>
    
    <div class="fb-share-button" data-href="/gtest-guide/" data-layout="button_count" data-size="small">
        <a target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=%2fgtest-guide%2f" class="fb-xfbml-parse-ignore">Share</a>
    </div>
    &nbsp;
    <a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button" data-text="Gtest Guide" data-url="/gtest-guide/" data-show-count="false">Tweet</a>
    <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    &nbsp;
    
</span>

            </div>
        </header>

        <div class="post-content">
            <p>This article offers a basic introduction of gtest.</p>

<h1 id="gtest">gtest</h1>

<p>gtest is a unit test framework for C++, which is developed by google. It&rsquo;s very popular in open source community. <a href="https://github.com/google/googletest">Google Test</a>.</p>

<h2 id="get-started">Get started</h2>

<ol>
<li><p>git clone gtest into your directory
<code>git clone https://github.com/google/googletest.git</code></p></li>

<li><p>Create CMakeLists.txt to compile your test case</p>

<pre><code>add_subdirectory(googletest) // compile googletest, will produce libgtest.a
include_directories(googletest/include) // add googletest into header files search path
link_directories(googletest) // add google test into lib search path
target_link_libraries(av1test gtest SvtAv1Enc) // link gtest libs
</code></pre></li>

<li><p>Create your test case</p>

<pre><code>#include &quot;gtest/gtest.h&quot;
int sum(int a, int b){
return a + b;
}
TEST(SumTest, add){
EXPECT_EQ(3, sum(1, 2));
}

int main(int argc, char **argv){
::testing::InitGoogleTest(&amp;argc, argv);
return RUN_ALL_TESTS()
}
</code></pre></li>

<li><p>compile and run the task</p></li>
</ol>

<h2 id="advanced-topics">Advanced Topics</h2>

<h3 id="explicit-success-and-failure">Explicit Success and Failure</h3>

<ul>
<li>SUCCEED()</li>
<li>FAIL(): can only be used in function that return void.</li>

<li><h3 id="exception-assertions">Exception Assertions</h3>

<p>Vefifying that a piece of code throws(or does not throw) an exception of the given type</p></li>
</ul>

<h3 id="predicate-assertions-for-better-err">Predicate Assertions for Better Err</h3>

<h3 id="floating-point-comparision">Floating-Point Comparision</h3>

<ol>
<li>Units in the Last Place</li>
<li>ASSERT_FLOAT_EQ(val1, val2)</li>
</ol>

<h3 id="asserting-using-gmock">Asserting Using gMock</h3>

<h3 id="more-string-assertions">More String Assertions</h3>

<ol>
<li>using gMock EXPECT_THAT() or ASSERT_THAT()</li>
</ol>

<h3 id="type-assertions">Type Assertions</h3>

<pre><code>to assert that types T1 and T2 are the same. ::::testing::StaticAssertTypeEq&lt;T1, T2&gt;();
</code></pre>

<h3 id="assertion-placement">Assertion Placement</h3>

<h3 id="teaching-googletest-how-to-print-your-values">Teaching googletest How to Print Your Values</h3>

<h3 id="death-test">Death Test</h3>

<pre><code> Any test that checks that a program terminates (except by throwing an exception) in an expected fashion is also a death test. ASSERT_DEATH, ASSERT_DEATH_IF_SUPPORTED
</code></pre>

<h3 id="value-parameterized-tests">Value-Parameterized Tests</h3>
        </div>

        <footer class="post-footer">
            
            <span class="post-categories">
                
                <a href="/categories/coding" rel="tag">coding</a>
                
            </span>
            

            
            <span class="post-tags">
                
                <a href="/tags/gtest" rel="tag">gtest</a>&emsp;
                
            </span>
            
        </footer>
        
<table cellspacing="15" style="width:100%; border: none;">
    <tr>
        <td style="text-align: center; border: none; padding: 0px;">
        </td>
        <td style="text-align: center; border: none; padding: 0px;">
        </td>
    </tr>
</table>

        
	
	

    </article>

    
    <nav class="navigation post-navigation" role="navigation">
        <div class="nav-links">
            <div class="nav-previous">
                
            </div>
            <div class="nav-next">
                
            </div>
        </div>
    </nav>
    <section>
        
    </section>
    

</main>


        <div class="sidebar1 widgets columns-1">

    <aside>
    
</aside>
    <aside class="widget widget_categories">
        <h2>Categories</h2>
        <ul class="widget__list"><li class="cat-item cat-item-2">
                <a href="/categories/coding">coding (1)</a>
            </li>
        </ul>
    </aside>

    <aside class="widget widget_tag_cloud">
        <h2>Tags</h2>
        <div class="tagcloud"><a class="tag-cloud-link" href="/tags/gtest" title="gtest" style="font-size: 12pt;">gtest</a>&emsp;
        </div>
    </aside>

    <aside class="widget widget_recent_entries">
        <h2>Recent Posts</h2>
        <ul>
            <li>
                <a href="/gtest-guide/">Gtest Guide</a>
            </li>
        </ul>
    </aside>

    <aside class="widget widget_archive">
        <h2>Archives</h2>
        <ul><li><a href="/archives/2019/03">2019/03 (1)</a></li>
        </ul>
    </aside>

</div>
        </div>
        </div>
<footer role="contentinfo" class="document-footer contentinfo widgets columns-1">

    <aside class="widget widget_text">
        <div class="textwidget">
            <p>Â© Myvideoyun&#39;s BLOG / Powered by <a href="https://gohugo.io" target="_blank">Hugo</a> with theme <a href="https://github.com/tosi29/inkblotty" target="_blank">Inkblotty</a></p>
        </div>
    </aside>
</footer>
</div>

    </body>
</html>
